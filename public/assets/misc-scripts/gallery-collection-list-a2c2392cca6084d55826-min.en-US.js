webpackJsonp([51],{5819:function(e,l){YUI.add("squarespace-gallery-collection-list",function(e){var l,t=e.config.win,a=e.config.win.document,n=function(){function l(l,t){var a=e.Squarespace.Template.getTweakValue(l);return t?a=parseFloat(a):"string"==typeof a&&(a=a.toLowerCase()),"true"===a?a=!0:"false"===a&&(a=!1),a}function t(){var e=p.gallery.one(".slide.sqs-active-slide");return e&&"video"===e.getAttribute("data-type")&&e.one("iframe")}function a(){return"grid"!==l("gallery-design")}function n(e){var l=0,t=e&&e.match(/(\d+):(\d+)/);return t&&3===t.length&&(l=t[1]/t[2]),l}function s(){var e=p.gallery.one(".slide.sqs-active-slide"),l=e&&e.getAttribute("data-slide-id")||null,t=p.gallery.one('.slide-meta[data-slide-id="'+l+'"]');t&&(p.body.hasClass(f.crop)?t.setStyles({top:null,bottom:null,left:null,width:null}):(p.body.hasClass(f.circlesNav)?(t.setStyle("top",(parseFloat(e._node.clientHeight)-parseFloat(e.one("img")._node.clientHeight))/2),t.setStyle("bottom",null)):(t.setStyle("top",null),t.setStyle("bottom",(parseFloat(e._node.clientHeight)-parseFloat(e.one("img")._node.clientHeight))/2)),t.setStyles({left:e.one("img").getComputedStyle("left"),width:e.one("img")._node.clientWidth})))}function r(e,l,t){var a,n,r;return l&&(a=l.one(".title"),n=l.one(".description"),(a&&a._node.innerHTML||n&&n._node.innerHTML)&&(t?r=!0:(l.addClass(f.show),s()))),r}function o(e){var l,a=p.gallery.one(".slide.sqs-active-slide"),n=a&&a.one("img"),s=a&&a.getAttribute("data-slide-id")||null;if(p.gallery.all(".slide-meta").removeClass(f.show),e&&Modernizr&&!Modernizr.touch&&p.gallery.addClass(f.interaction),t()?(p.gallery.addClass(f.iframe),p.gallery.removeClass(f.mouseenterleft),p.gallery.removeClass(f.mouseenterright)):(p.gallery.removeClass(f.iframe),e&&"Gallery:currentIndexChange"===e.type&&(-1===e.direction?p.gallery.addClass(f.mouseenterleft):p.gallery.addClass(f.mouseenterright))),s&&(r(a,p.gallery.one('.slide-meta[data-slide-id="'+s+'"]')),n&&p.body.hasClass(f.circlesNav))){var o=function(){l=Math.max(0,(parseFloat(a._node.clientHeight)-parseFloat(n._node.clientHeight))/2),p.circles.setStyle("bottom",l)};n.get("complete")?o():w.push(n.on("load",o))}}function i(){var t=l("gallery-loop"),r=l("gallery-auto-crop"),i=l("gallery-autoplay"),d=l("gallery-transitions"),u=1e3*l("galleryAutoplaySpeed",!0),c=l("gallery-navigation"),g=l("gallery-aspect-ratio"),y=g.split(" ")[0],m=!a(),C=0;y=parseInt(g.split(":")[1],10)/parseInt(g.split(":")[0],10),g=p.gallery._node.clientWidth*y,p.gallery.removeClass(f.init),p.gallery.removeClass(f.ready),p.gallery.removeClass(f.interaction),p.gallery.removeClass(f.mouseenterleft),p.gallery.removeClass(f.mouseenterright),p.gallery.all(".slide-meta").removeClass(f.show),h&&(C=h.get("currentIndex"),p.gallery.all(".sqs-disabled").removeClass("sqs-disabled"),p.gallery.all(".sqs-active-slide").removeClass("sqs-active-slide"),p.gallery.all(".slide, img").setStyles({visibility:null,left:null,top:null,overflow:null,width:null,height:null}),h.destroy()),v&&(p.gallery.all(".thumbnail img[data-src]").each(function(e){e.setStyles({height:null,width:null,top:null,left:null})}),v.destroy()),p.gallery.one(".slides-controls").setStyle("height",m?null:g),p.slideWrapper.setStyle("minHeight",m?null:g),h=new e.SQS.Gallery.Gallery2({container:".slides",slides:".slide",currentIndex:C,elements:{next:".next-slide, .simple .next",previous:".previous-slide, .simple .previous",controls:".dots, .numbers, .circles",currentIndex:".current-index",totalSlides:".total-slides"},loop:t,autoplay:!m&&i,autoplayOptions:{randomize:!1,timeout:u,pauseOnMouseover:[".thumbnail-wrapper"]},lazyLoad:!0,loaderOptions:{mode:m?"auto"===l("aspect-ratio")?"none":"fill":r?"fill":"fit"},design:m?"autocolumns":"stacked",designOptions:{transition:d,lightbox:m,clickBehavior:"auto",gutter:l("gridSpacing",!0),columnWidth:l("gridSize",!0),aspectRatio:n(l("aspect-ratio"))},historyHash:!0}),p.gallery.all(".arrow").each(function(e){e.setStyle("top",p.slideWrapper._node.clientHeight/2)}),m||"thumbnails"!==c||(v=new e.SQS.Gallery.Gallery2({container:".thumbnail-wrapper",currentIndex:C,loaderOptions:{mode:"fill",load:!0},lazyLoad:!0,design:"strip"}),h.addChild(v));var S=h.after("currentIndexChange",o);o();var q=h.after("image-loaded",s);s(),p.gallery.addClass(f.ready),w.push(S,q)}function d(e){"function"==typeof e&&(window.throttleTimeout&&clearTimeout(window.throttleTimeout),window.throttleTimeout=setTimeout(e,750))}function u(e,l){var t=e._event.offsetX||e._event.layerX;p.gallery.addClass(f.interaction),e._event.target&&("img"===e._event.target.localName||"sqs-video-opaque"===e._event.target.className||e.target.hasClass("slide"))&&(l?(p.gallery.removeClass(f.mouseenterleft),p.gallery.removeClass(f.mouseenterright)):t<=e._currentTarget.clientWidth/2?(p.gallery.removeClass(f.mouseenterright),p.gallery.addClass(f.mouseenterleft)):(p.gallery.removeClass(f.mouseenterleft),p.gallery.addClass(f.mouseenterright)))}function c(e){var l=e.keyCode;(37===l||39===l&&a())&&p.gallery.addClass(f.interaction)}function g(){var l=new e.Squarespace.ResizeEmitter({timeout:100});l.on("resize:end",function(){window.innerWidth!==C&&(C=window.innerWidth,d(i))}),S.push(l),Modernizr&&!Modernizr.touch&&w.push(e.on("mousemove",function(e){a()&&u(e,!1)},p.gallery.one(".slides-controls")),e.on("mouseleave",function(e){a()&&(u(e,!0),p.gallery.removeClass(f.iframe))},p.gallery.one(".slides-controls")),e.on("mouseenter",function(e){a()&&t()&&p.gallery.addClass(f.iframe)},p.gallery.one(".slides-controls"))),w.push(e.on("keydown",c))}function y(l,t){w.push(e.Global.on("tweak:change",function(e){if(e.getName()===l&&"function"==typeof t){var a=e.getValue();"true"===a?a=!0:"false"===a&&(a=!1),t(a)}}))}function m(){y("gallery-loop",i),y("gallery-transitions",i),y("gallery-auto-crop",i),y("gallery-navigation",function(e){"Thumbnails"!==e||p.gallery.one(".thumbnail-wrapper img[src]")||i(),s()}),y("gallery-autoplay",function(e){h.set("autoplay",e)}),y("gallery-aspect-ratio",function(){i()}),y("galleryAutoplaySpeed",function(){d(i)}),y("galleryInfoBackground",function(){o()}),y("gallery-design",i),y("aspect-ratio",i),y("gridSpacing",i),y("gridSize",i),e.Global&&w.push(e.Global.on(["tweak:reset","tweak:close"],function(l){e.later(500,this,i)},this))}var p={body:e.one("body"),gallery:e.one(".sqs-system-gallery"),slideWrapper:e.one(".sqs-system-gallery").one(".gallery-wrapper"),slidesAndControls:e.one(".sqs-system-gallery").one(".slides-controls"),circles:e.one(".sqs-system-gallery").one(".circles")},f={show:"show",ready:"sqs-system-gallery-ready",interaction:"sqs-system-gallery-interaction",mouseenterleft:"sqs-system-gallery-hover-slides-left",mouseenterright:"sqs-system-gallery-hover-slides-right",init:"sqs-system-gallery-init",circlesNav:"gallery-navigation-circles",crop:"gallery-auto-crop",iframe:"sqs-system-gallery-video-iframe"},h=null,v=null,C=window.innerWidth,w=[],S=[];return{init:function(){i(),g(),e.Lang.isValue(Static.SQUARESPACE_CONTEXT.authenticatedAccount)&&m()},destroy:function(){w=w.filter(function(e){return e.detach(),!1}),S=S.filter(function(e){return"function"==typeof e.destroy&&e.destroy(),!1}),h&&(h.get("container")&&h.get("container").hide(),"function"==typeof h.destroy&&h.destroy()),v&&(v.get("container")&&v.get("container").hide(),"function"==typeof v.destroy&&v.destroy())}}};t.Squarespace.onInitialize(e,function(){a.querySelector(".sqs-gallery-list")&&(l=new n).init()}),t.Squarespace.onDestroy(e,function(){l&&(l.destroy&&"function"==typeof l.destroy&&l.destroy(),l=null)})},"1.0",{requires:["base","node","squarespace-dom-emitters-resize","squarespace-gallery-ng","squarespace-image-loader","squarespace-public-api"]})},8518:function(e,l,t){t(5819)}},[8518]);